<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>stubbyfowl</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      overflow: hidden; /* disable normal scroll */
    }
    header {
      padding: 30px 0;
      font-size: 36px;
      font-weight: bold;
      text-align: center;
      position: fixed;
      width: 100%;
      z-index: 10;
    }
    nav {
      margin-top: 80px;
      display: flex;
      justify-content: center;
      gap: 20px;
      position: fixed;
      width: 100%;
      z-index: 10;
    }
    nav button {
      background: none;
      border: 2px solid #fff;
      padding: 10px 18px;
      color: #fff;
      cursor: pointer;
      border-radius: 6px;
      font-size: 16px;
    }
    nav button:hover {
      background: #fff;
      color: #111;
    }

    #world {
      position: absolute;
      top: 0;
      left: 0;
      height: 100vh;
      width: 5000px; /* start large, expand dynamically */
      background: #111;
    }

    #shimeji {
      position: absolute;
      width: 64px;
      height: 64px;
      user-select: none;
      cursor: grab;
      z-index: 999999;
      transition: transform 0.1s;
    }
    #shimeji:active { cursor: grabbing; }
  </style>
</head>
<body>
  <header>stubbyfowl</header>
  <nav>
    <a href="about.html"><button>about</button></a>
    <a href="mods.html"><button>mods</button></a>
    <a href="contact.html"><button>contact</button></a>
  </nav>

  <div id="world">
    <img id="shimeji" src="images/littleguy.png" />
  </div>

<script>
  const guy = document.getElementById("shimeji");
  const world = document.getElementById("world");

  guy.ondragstart = e => e.preventDefault();

  let x = 100;
  let y = window.innerHeight - 80;
  let vx = 1.5;
  let vy = 0;
  const gravity = 0.6;
  let dragging = false;

  let offsetX = 0, offsetY = 0;
  let prevMouseX = 0, prevMouseY = 0;
  let mouseVX = 0, mouseVY = 0;

  let moveLeft = false, moveRight = false;

  // keyboard
  window.addEventListener('keydown', e => {
    if (e.key === 'ArrowLeft') moveLeft = true;
    if (e.key === 'ArrowRight') moveRight = true;
    if (e.key === 'ArrowUp') {
      if (y + 64 >= window.innerHeight - 1) vy = -12;
    }
  });

  window.addEventListener('keyup', e => {
    if (e.key === 'ArrowLeft') moveLeft = false;
    if (e.key === 'ArrowRight') moveRight = false;
  });

  guy.addEventListener("mousedown", e => {
    dragging = true;
    offsetX = e.clientX + cameraX - x;
    offsetY = e.clientY - y;
    prevMouseX = e.clientX;
    prevMouseY = e.clientY;
    mouseVX = 0;
    mouseVY = 0;
    guy.style.transform = "scale(0.9)";
  });

  window.addEventListener("mousemove", e => {
    if (dragging) {
      x = e.clientX + cameraX - offsetX;
      y = e.clientY - offsetY;
      mouseVX = e.clientX - prevMouseX;
      mouseVY = e.clientY - prevMouseY;
      prevMouseX = e.clientX;
      prevMouseY = e.clientY;
    }
  });

  window.addEventListener("mouseup", () => {
    if (dragging) {
      dragging = false;
      guy.style.transform = "scale(1)";
      vx = mouseVX * 0.5;
      vy = mouseVY * 0.5;
    }
  });

  // camera
  let cameraX = 0;

  function update() {
    if (!dragging) {
      if (moveLeft) vx -= 0.5;
      if (moveRight) vx += 0.5;

      vy += gravity;
      y += vy;
      x += vx;

      vx *= 0.98;
      vy *= 0.98;

      // expand world dynamically
      if (x + 200 > world.offsetWidth) {
        world.style.width = world.offsetWidth + 1000 + "px";
      }
      if (x < 200) {
        const extra = 1000;
        world.style.width = world.offsetWidth + extra + "px";
        x += extra;
        cameraX += extra;
      }

      // floor
      if (y + 64 >= window.innerHeight) {
        y = window.innerHeight - 64;
        vy *= -0.6;
      }
    }

    // camera follows guy
    cameraX = x - window.innerWidth / 2 + 32;
    if (cameraX < 0) cameraX = 0;

    world.style.left = -cameraX + "px";

    guy.style.left = x + "px";
    guy.style.top = y + "px";

    requestAnimationFrame(update);
  }

  update();
</script>
</body>
</html>
