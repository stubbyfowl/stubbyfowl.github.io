<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>stubbyfowl</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      text-align: center;
    }
    header {
      padding: 30px 0;
      font-size: 36px;
      font-weight: bold;
    }
    nav {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    nav button {
      background: none;
      border: 2px solid #fff;
      padding: 10px 18px;
      color: #fff;
      cursor: pointer;
      border-radius: 6px;
      font-size: 16px;
    }
    nav button:hover {
      background: #fff;
      color: #111;
    }
    #shimeji {
      position: fixed;
      bottom: 0;
      left: 100px;
      width: 64px;
      height: 64px;
      user-select: none;
      cursor: grab;
      z-index: 999999;
      transition: transform 0.1s;
    }
    #shimeji:active {
      cursor: grabbing;
    }
  </style>
</head>
<body>
  <header>stubbyfowl</header>
  <nav>
    <a href="about.html"><button>about</button></a>
    <a href="mods.html"><button>mods</button></a>
    <a href="contact.html"><button>contact</button></a>
  </nav>

  <img id="shimeji" src="images/littleguy.png">

<script>
  const guy = document.getElementById("shimeji");

  guy.ondragstart = e => e.preventDefault();
  guy.style.userSelect = "none";

  let x = 100;
  let y = window.innerHeight - 80;
  let vx = 1.5;
  let vy = 0;
  const gravity = 0.6;
  let dragging = false;

  let offsetX = 0;
  let offsetY = 0;

  let prevMouseX = 0;
  let prevMouseY = 0;
  let mouseVX = 0;
  let mouseVY = 0;

  // movement keys
  let moveLeft = false;
  let moveRight = false;

  // keyboard listeners
  window.addEventListener('keydown', e => {
    if (e.key === 'ArrowLeft') moveLeft = true;
    if (e.key === 'ArrowRight') moveRight = true;
    if (e.key === 'ArrowUp') {
      if (y + 64 >= window.innerHeight - 1) {
        vy = -12; // jump
      }
    }
  });

  window.addEventListener('keyup', e => {
    if (e.key === 'ArrowLeft') moveLeft = false;
    if (e.key === 'ArrowRight') moveRight = false;
  });

  guy.addEventListener("mousedown", e => {
    dragging = true;
    offsetX = e.clientX - x;
    offsetY = e.clientY - y;
    prevMouseX = e.clientX;
    prevMouseY = e.clientY;
    mouseVX = 0;
    mouseVY = 0;
    guy.style.transform = "scale(0.9)";
  });

  window.addEventListener("mousemove", e => {
    if (dragging) {
      x = e.clientX - offsetX;
      y = e.clientY - offsetY;
      mouseVX = e.clientX - prevMouseX;
      mouseVY = e.clientY - prevMouseY;
      prevMouseX = e.clientX;
      prevMouseY = e.clientY;
    }
  });

  window.addEventListener("mouseup", () => {
    if (dragging) {
      dragging = false;
      guy.style.transform = "scale(1)";
      vx = mouseVX * 0.5;
      vy = mouseVY * 0.5;
    }
  });

  function update() {
    if (!dragging) {
      // keyboard movement
      if (moveLeft) vx -= 0.5;
      if (moveRight) vx += 0.5;

      vy += gravity;
      y += vy;
      x += vx;

      vx *= 0.98;
      vy *= 0.98;

      if (y + 64 >= window.innerHeight && vy > 0) {
        y = window.innerHeight - 64;
        vy *= -0.6;
      }
      if (y <= 0) {
        y = 0;
        vy *= -0.6;
      }
      if (x <= 0) {
        x = 0;
        vx *= -0.6;
      }
      if (x + 64 >= window.innerWidth) {
        x = window.innerWidth - 64;
        vx *= -0.6;
      }
    }

    guy.style.left = x + "px";
    guy.style.top = y + "px";

    requestAnimationFrame(update);
  }

  update();
</script>
</body>
</html>
